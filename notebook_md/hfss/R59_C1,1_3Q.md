---
jupyter:
  jupytext:
    text_representation:
      extension: .md
      format_name: markdown
      format_version: '1.3'
      jupytext_version: 1.17.2
  kernelspec:
    display_name: pyaedt9
    language: python
    name: python3
---

```python
%reload_ext autoreload
%autoreload 2
from qiskit_metal import designs
from qiskit_metal import MetalGUI, Dict
from collections import OrderedDict

from qiskit_metal.qlibrary.sample_shapes.rectangle import Rectangle
from qiskit_metal.qlibrary.terminations.short_to_ground import ShortToGround
from qiskit_metal.qlibrary.terminations.launchpad_wb import LaunchpadWirebond
from qiskit_metal.qlibrary.tlines.meandered import RouteMeander
from qiskit_metal.qlibrary.tlines.pathfinder import RoutePathfinder
from qiskit_metal.qlibrary.tlines.straight_path import RouteStraight
from qiskit_metal.toolbox_metal.parsing import parse_value
from qiskit_metal.analyses.quantization import EPRanalysis

from zcu_tools.notebook.hfss.fillet_q import Fillet_Qubit
from zcu_tools.notebook.hfss.round_tee import Round_Tee
```

# Circuit Design

```python
design = designs.DesignPlanar()
gui = MetalGUI(design)
design.overwrite_enabled = True
design.chips.main.size.size_x = '10 mm'
design.chips.main.size.size_y = '10 mm'
design.chips.main.size.size_z = '-650 um'
design.chips.main.material = 'sapphire'
var = design.variables
print(var)
```

```python
"""
Set 8 ports. 2 for readout TL, 3 for charge line and 3 for flux line. 
"""
x_port, y_port = 3.000, 3.000
TL_width, TL_gap = 0.020, 0.012

port_L1 = LaunchpadWirebond(design, 'port_L1', options = dict(pos_x = -x_port, pos_y =  y_port, orientation = '  0', 
                                                              pad_width = 0.5, pad_height = 0.25, pad_gap = 0.2, taper_height = 0.5,
                                                              lead_length = 0.100, trace_width=0.020, trace_gap=0.012))
port_L2 = LaunchpadWirebond(design, 'port_L2', options = dict(pos_x = -x_port, pos_y =  1.0, orientation = '  0', 
                                                              pad_width = 0.5, pad_height = 0.25, pad_gap = 0.2, taper_height = 0.5,
                                                              lead_length = 0.100, trace_width=0.010, trace_gap=0.006))
port_L3 = LaunchpadWirebond(design, 'port_L3', options = dict(pos_x = -x_port, pos_y = -1.0, orientation = '  0', 
                                                              pad_width = 0.5, pad_height = 0.25, pad_gap = 0.2, taper_height = 0.5,
                                                              lead_length = 0.100, trace_width=0.010, trace_gap=0.006))
port_L4 = LaunchpadWirebond(design, 'port_L4', options = dict(pos_x = -x_port, pos_y = -y_port, orientation = '  0', 
                                                              pad_width = 0.5, pad_height = 0.25, pad_gap = 0.2, taper_height = 0.5,
                                                              lead_length = 0.100, trace_width=0.010, trace_gap=0.006))
port_R1 = LaunchpadWirebond(design, 'port_R1', options = dict(pos_x =  x_port, pos_y =  y_port, orientation = '180', 
                                                              pad_width = 0.5, pad_height = 0.25, pad_gap = 0.2, taper_height = 0.5,
                                                              lead_length = 0.100, trace_width=0.020, trace_gap=0.012))
port_R2 = LaunchpadWirebond(design, 'port_R2', options = dict(pos_x =  x_port, pos_y =  1.0, orientation = '180', 
                                                              pad_width = 0.5, pad_height = 0.25, pad_gap = 0.2, taper_height = 0.5,
                                                              lead_length = 0.100, trace_width=0.010, trace_gap=0.006))
port_R3 = LaunchpadWirebond(design, 'port_R3', options = dict(pos_x =  x_port, pos_y = -1.0, orientation = '180', 
                                                              pad_width = 0.5, pad_height = 0.25, pad_gap = 0.2, taper_height = 0.5,
                                                              lead_length = 0.100, trace_width=0.010, trace_gap=0.006))
port_R4 = LaunchpadWirebond(design, 'port_R4', options = dict(pos_x =  x_port, pos_y = -y_port, orientation = '180', 
                                                              pad_width = 0.5, pad_height = 0.25, pad_gap = 0.2, taper_height = 0.5,
                                                              lead_length = 0.100, trace_width=0.010, trace_gap=0.006))
gui.rebuild()
gui.autoscale()
gui.screenshot()
```

```python
"""
Set transmission line (TL).
"""
TL_width, TL_gap = 0.020, 0.012

TL = RouteStraight(design, 'TL', 
    dict(pin_inputs = dict(start_pin = dict(component = 'port_L1', pin = 'tie'), 
                             end_pin = dict(component = 'port_R1', pin = 'tie')),
         trace_width = TL_width, trace_gap = TL_gap, fillet = 0.100, hfss_wire_bonds = True,
         lead = dict(start_straight=0.500, end_straight=0.500)))

gui.rebuild()
gui.autoscale()
gui.screenshot()
```

```python
"""
Set 3 separated fluxonia with rectangles. Make sure the layers of fluxonium components are correct for fabrication process. 
"""
x_center, y_center = 0.000, 0.000
x_dis, y_dis = 1.350, 0.000
q_opt = {'pos_x': -x_dis, 'pos_y': 0, 'orientation': 0, 
         'pad_gap': 0.030, 'arm_width': 0.008, 'arm_length': 0.100, 'arm_fillet': 0.020,
         'pad_width': 0.130, 'pad_height': 0.090, 'pad_fillet': 0.050, 
         'pocket_width': 0.350, 'pocket_height': 0.550, 'pocket_fillet': 0.050, 
         'layer': 1}
Q1 = Fillet_Qubit(design, 'Q1', q_opt)

q_opt.update(pos_x=0)
Q2 = Fillet_Qubit(design, 'Q2', q_opt)

q_opt.update(pos_x=x_dis)
Q3 = Fillet_Qubit(design, 'Q3', q_opt)

gui.rebuild()
gui.autoscale()
gui.screenshot()
```

```python
"""
Set resonators.
"""
res_width, res_gap = 0.015, 0.009

R1_len = 5.294
spacing, fillet = 0.60, 0.050 # fillet > 1.5*(res_width+res_gap*2)
l_couple, grd_gap = 0.32958, 0.004
R_ext, shift_x, shift_y = 0.200, 0, 0.250
tee_width, tee_length, tee_fillet = 0.016, 0.100, 0.005

Tee_1 = Round_Tee(design, "Tee_1",
    dict(ref_qc = Q1, rel_ori = "90", shift_x = shift_x, shift_y = shift_y,
         cpw_width = res_width, cpw_gap = res_gap, ext_len = R_ext, 
         tee_width = tee_width, tee_length = tee_length, tee_fillet = tee_fillet)
)

stg_q1 = ShortToGround(design, 'stg_q1',
    {'pos_x': Q1.options.pos_x, 'pos_y': Tee_1.options.shift_y + Tee_1.options.tee_width/2 + Tee_1.options.ext_len, 'orientation': '270'})
stg_r1 = ShortToGround(design, 'stg_r1',
    {'pos_x': Q1.options.pos_x-(l_couple+fillet), 'pos_y': port_L1.options.pos_y-TL_gap-res_gap-(TL_width+res_width)/2-grd_gap, 'orientation': '180'})
start_jog = OrderedDict()
start_jog[0] = ["R", 0.45]
R1 = RouteMeander(design, 'R1', 
    options = dict(total_length = R1_len-R_ext, fillet=fillet, hfss_wire_bonds = True, 
                   lead = dict(start_straight=l_couple+fillet, end_straight=0.45,
                               start_jogged_extension = start_jog), 
                   trace_width = res_width, trace_gap = res_gap,
                   meander = dict(
                       spacing=spacing, 
                       asymmetry=0
                   ),
                   pin_inputs = Dict(start_pin = Dict(component = 'stg_r1', pin = 'short'),
                                       end_pin = Dict(component = 'stg_q1', pin = 'short'))))

R2_len = 5.344
spacing, fillet = 0.60, 0.050 # fillet > 1.5*(res_width+res_gap*2)
l_couple, grd_gap = 0.3358, 0.004
R_ext, shift_x, shift_y = 0.200, 0, 0.250
tee_width, tee_length, tee_fillet = 0.016, 0.100, 0.005

Tee_2 = Round_Tee(design, "Tee_2",
    dict(ref_qc = Q2, rel_ori = "90", shift_x = shift_x, shift_y = shift_y,
         cpw_width = res_width, cpw_gap = res_gap, ext_len = R_ext, 
         tee_width = tee_width, tee_length = tee_length, tee_fillet = tee_fillet)
)

stg_q2 = ShortToGround(design, 'stg_q2',
    {'pos_x': Q2.options.pos_x, 'pos_y': Tee_2.options.shift_y + Tee_2.options.tee_width/2 + Tee_2.options.ext_len, 'orientation': '270'})
stg_r2 = ShortToGround(design, 'stg_r2',
    {'pos_x': Q2.options.pos_x-(l_couple+fillet), 'pos_y': port_L1.options.pos_y-TL_gap-res_gap-(TL_width+res_width)/2-grd_gap, 'orientation': '180'})
start_jog = OrderedDict()
start_jog[0] = ["R", 0.75]
R2 = RouteMeander(design, 'R2', 
    options = dict(total_length = R2_len-R_ext, fillet=fillet, hfss_wire_bonds = True, 
                   lead = dict(start_straight=l_couple+fillet, end_straight=0.35,
                               start_jogged_extension = start_jog), 
                   trace_width = res_width, trace_gap = res_gap,
                   meander = dict(
                       spacing=spacing, 
                       asymmetry=0
                   ),
                   pin_inputs = Dict(start_pin = Dict(component = 'stg_r2', pin = 'short'),
                                       end_pin = Dict(component = 'stg_q2', pin = 'short'))))

R3_len = 5.394
spacing, fillet = 0.60, 0.050 # fillet > 1.5*(res_width+res_gap*2)
l_couple, grd_gap = 0.34217, 0.004
R_ext, shift_x, shift_y = 0.200, 0, 0.250
tee_width, tee_length, tee_fillet = 0.016, 0.100, 0.005

Tee_3 = Round_Tee(design, "Tee_3",
    dict(ref_qc = Q3, rel_ori = "90", shift_x = shift_x, shift_y = shift_y,
         cpw_width = res_width, cpw_gap = res_gap, ext_len = R_ext, 
         tee_width = tee_width, tee_length = tee_length, tee_fillet = tee_fillet)
)

stg_q3 = ShortToGround(design, 'stg_q3',
    {'pos_x': Q3.options.pos_x, 'pos_y': Tee_3.options.shift_y + Tee_3.options.tee_width/2 + Tee_3.options.ext_len, 'orientation': '270'})
stg_r3 = ShortToGround(design, 'stg_r3',
    {'pos_x': Q3.options.pos_x-(l_couple+fillet), 'pos_y': port_L1.options.pos_y-TL_gap-res_gap-(TL_width+res_width)/2-grd_gap, 'orientation': '180'})
start_jog = OrderedDict()
start_jog[0] = ["R", 1.05]
R3 = RouteMeander(design, 'R3', 
    options = dict(total_length = R3_len-R_ext, fillet=fillet, hfss_wire_bonds = True, 
                   lead = dict(start_straight=l_couple+fillet, end_straight=0.05,
                               start_jogged_extension = start_jog), 
                   trace_width = res_width, trace_gap = res_gap,
                   meander = dict(
                       spacing=spacing, 
                       asymmetry=0
                   ),
                   pin_inputs = Dict(start_pin = Dict(component = 'stg_r3', pin = 'short'),
                                       end_pin = Dict(component = 'stg_q3', pin = 'short'))))

gui.rebuild()
gui.autoscale()
gui.screenshot()
```

```python
"""
Flux bias line for each qubit. 
"""
q_loop_width, q_loop_height, q_loop_trace = 0.060, 0.010, 0.002
loop_H, loop_W, loop_wid = 0.050, 0.090, 0.005
fl_loop_stg_1A = ShortToGround(design, 'fl_loop_stg_1A', 
    dict(pos_x=Q1.options.pos_x-Q1.options.pocket_width/2, pos_y=Q1.options.pos_y-loop_H/2, orientation=180))
fl_loop_stg_1B = ShortToGround(design, 'fl_loop_stg_1B', 
    dict(pos_x=Q1.options.pos_x-Q1.options.pocket_width/2, pos_y=Q1.options.pos_y+loop_H/2, orientation=180))
fl_loop_route_1 = RouteStraight(design, 'fl_loop_route_1',
    dict(trace_width=loop_wid, trace_gap=0, fillet=0.010, hfss_wire_bonds=False,
         lead = dict(start_straight=loop_W, end_straight=loop_W),
         pin_inputs = Dict(start_pin = Dict(component = 'fl_loop_stg_1A', pin = 'short'),
                             end_pin = Dict(component = 'fl_loop_stg_1B', pin = 'short'))))
fl_q_stg_1 = ShortToGround(design, 'fl_q_stg_1', 
    dict(pos_x=Q1.options.pos_x-Q1.options.pocket_width/2, pos_y=Q1.options.pos_y-loop_H/2, orientation=0))
fl_q_route_1 = RoutePathfinder(design, 'fl_q_route_1', 
    dict(trace_width='10um', trace_gap='6um', fillet=0.050, hfss_wire_bonds=True,
         lead = dict(start_straight=0.300, end_straight=0.900),
         pin_inputs = Dict(start_pin = Dict(component = 'port_L2', pin = 'tie'),
                             end_pin = Dict(component = 'fl_q_stg_1', pin = 'short'))))

q_loop_width, q_loop_height, q_loop_trace = 0.060, 0.010, 0.002
loop_H, loop_W, loop_wid = 0.050, 0.090, 0.005
fl_loop_stg_2A = ShortToGround(design, 'fl_loop_stg_2A', 
    dict(pos_x=Q2.options.pos_x-Q2.options.pocket_width/2, pos_y=Q2.options.pos_y-loop_H/2, orientation=180))
fl_loop_stg_2B = ShortToGround(design, 'fl_loop_stg_2B', 
    dict(pos_x=Q2.options.pos_x-Q2.options.pocket_width/2, pos_y=Q2.options.pos_y+loop_H/2, orientation=180))
fl_loop_route_2 = RouteStraight(design, 'fl_loop_route_2',
    dict(trace_width=loop_wid, trace_gap=0, fillet=0.010, hfss_wire_bonds=False,
         lead = dict(start_straight=loop_W, end_straight=loop_W),
         pin_inputs = Dict(start_pin = Dict(component = 'fl_loop_stg_2A', pin = 'short'),
                             end_pin = Dict(component = 'fl_loop_stg_2B', pin = 'short'))))
fl_q_stg_2 = ShortToGround(design, 'fl_q_stg_2', 
    dict(pos_x=Q2.options.pos_x-Q2.options.pocket_width/2, pos_y=Q2.options.pos_y-loop_H/2, orientation=0))
fl_q_route_2 = RoutePathfinder(design, 'fl_q_route_2', 
    dict(trace_width='10um', trace_gap='6um', fillet=0.050, hfss_wire_bonds=True,
         lead = dict(start_straight=1.000, end_straight=0.400),
         pin_inputs = Dict(start_pin = Dict(component = 'port_L4', pin = 'tie'),
                             end_pin = Dict(component = 'fl_q_stg_2', pin = 'short'))))

q_loop_width, q_loop_height, q_loop_trace = 0.060, 0.010, 0.002
loop_H, loop_W, loop_wid = 0.050, 0.090, 0.005
fl_loop_stg_3A = ShortToGround(design, 'fl_loop_stg_3A', 
    dict(pos_x=Q3.options.pos_x+Q3.options.pocket_width/2, pos_y=Q3.options.pos_y-loop_H/2, orientation=  0))
fl_loop_stg_3B = ShortToGround(design, 'fl_loop_stg_3B', 
    dict(pos_x=Q3.options.pos_x+Q3.options.pocket_width/2, pos_y=Q3.options.pos_y+loop_H/2, orientation=  0))
fl_loop_route_3 = RouteStraight(design, 'fl_loop_route_3',
    dict(trace_width=loop_wid, trace_gap=0, fillet=0.010, hfss_wire_bonds=False,
         lead = dict(start_straight=loop_W, end_straight=loop_W),
         pin_inputs = Dict(start_pin = Dict(component = 'fl_loop_stg_3A', pin = 'short'),
                             end_pin = Dict(component = 'fl_loop_stg_3B', pin = 'short'))))
fl_q_stg_3 = ShortToGround(design, 'fl_q_stg_3', 
    dict(pos_x=Q3.options.pos_x+Q3.options.pocket_width/2, pos_y=Q3.options.pos_y-loop_H/2, orientation=180))
fl_q_route_3 = RoutePathfinder(design, 'fl_q_route_3', 
    dict(trace_width='10um', trace_gap='6um', fillet=0.050, hfss_wire_bonds=True,
         lead = dict(start_straight=0.300, end_straight=0.900),
         pin_inputs = Dict(start_pin = Dict(component = 'port_R2', pin = 'tie'),
                             end_pin = Dict(component = 'fl_q_stg_3', pin = 'short'))))

gui.rebuild()
gui.autoscale()
gui.screenshot()
```

```python
"""
Charge line for each qubit. 
"""
cpw_width, cpw_gap = parse_value(var.cpw_width, var), parse_value(var.cpw_gap, var)
cl_vac, cl_grd, cl_ext = 0.020, 0.010, 0.300
cl_q1_gap_1 = Rectangle(design, 'cl_q1_gap_1', 
    dict(pos_x = Q1.options.pos_x, pos_y = Q1.options.pos_y-Q1.options.pocket_height/2-cl_grd-cl_ext/2, 
         width = cpw_gap*2+cpw_width, height = cl_ext, subtract=True))
cl_q1_trace_1 = Rectangle(design, 'cl_q1_trace_1', 
    dict(pos_x = Q1.options.pos_x, pos_y = Q1.options.pos_y-Q1.options.pocket_height/2-cl_grd-cl_ext/2, 
         width = cpw_width, height = cl_ext-cl_vac*2))
cl_q_stg_1 = ShortToGround(design, 'cl_q_stg_1', 
    dict(pos_x = Q1.options.pos_x, pos_y = Q1.options.pos_y-Q1.options.pocket_height/2-cl_grd-cl_ext+cl_vac, 
         orientation=90))
cl_q_route_1 = RoutePathfinder(design, 'cl_q_route_1', 
    dict(trace_width='10um', trace_gap='6um', fillet=0.100, hfss_wire_bonds=True,
         lead = dict(start_straight=0.200, end_straight=0.100),
         pin_inputs = Dict(start_pin = Dict(component = 'port_L3', pin = 'tie'),
                             end_pin = Dict(component = 'cl_q_stg_1', pin = 'short'))))

cl_q1_gap_2 = Rectangle(design, 'cl_q1_gap_2', 
    dict(pos_x = Q2.options.pos_x, pos_y = Q2.options.pos_y-Q2.options.pocket_height/2-cl_grd-cl_ext/2, 
         width = cpw_gap*2+cpw_width, height = cl_ext, subtract=True))
cl_q1_trace_2 = Rectangle(design, 'cl_q1_trace_2', 
    dict(pos_x = Q2.options.pos_x, pos_y = Q2.options.pos_y-Q2.options.pocket_height/2-cl_grd-cl_ext/2, 
         width = cpw_width, height = cl_ext-cl_vac*2))
cl_q_stg_2 = ShortToGround(design, 'cl_q_stg_2', 
    dict(pos_x = Q2.options.pos_x, pos_y = Q2.options.pos_y-Q2.options.pocket_height/2-cl_grd-cl_ext+cl_vac, 
         orientation=90))
cl_q_route_2 = RoutePathfinder(design, 'cl_q_route_2', 
    dict(trace_width='10um', trace_gap='6um', fillet=0.100, hfss_wire_bonds=True,
         lead = dict(start_straight=0.200, end_straight=0.100),
         pin_inputs = Dict(start_pin = Dict(component = 'port_R4', pin = 'tie'),
                             end_pin = Dict(component = 'cl_q_stg_2', pin = 'short'))))

cl_q1_gap_3 = Rectangle(design, 'cl_q1_gap_3', 
    dict(pos_x = Q3.options.pos_x, pos_y = Q3.options.pos_y-Q3.options.pocket_height/2-cl_grd-cl_ext/2, 
         width = cpw_gap*2+cpw_width, height = cl_ext, subtract=True))
cl_q1_trace_3 = Rectangle(design, 'cl_q1_trace_3', 
    dict(pos_x = Q3.options.pos_x, pos_y = Q3.options.pos_y-Q3.options.pocket_height/2-cl_grd-cl_ext/2, 
         width = cpw_width, height = cl_ext-cl_vac*2))
cl_q_stg_3 = ShortToGround(design, 'cl_q_stg_3', 
    dict(pos_x = Q3.options.pos_x, pos_y = Q3.options.pos_y-Q3.options.pocket_height/2-cl_grd-cl_ext+cl_vac, 
         orientation=90))
cl_q_route_3 = RoutePathfinder(design, 'cl_q_route_3', 
    dict(trace_width='10um', trace_gap='6um', fillet=0.100, hfss_wire_bonds=True,
         lead = dict(start_straight=0.200, end_straight=0.100),
         pin_inputs = Dict(start_pin = Dict(component = 'port_R3', pin = 'tie'),
                             end_pin = Dict(component = 'cl_q_stg_3', pin = 'short'))))

gui.rebuild()
gui.autoscale()
gui.screenshot()
```

```python
# grd_gap = 0.010

# RA_len = 4.5
# l_couple = 0.2
# otg_qA = OpenToGround(design, 'otg_qA',
#     {'pos_x': -1.6, 'pos_y': 1.0, 'orientation': '  0', 'width': res_width, 'gap': res_gap, 'termination_gap': res_gap})
# stg_rA = ShortToGround(design, 'stg_rA',
#     {'pos_x': -1.6-l_couple, 'pos_y': port_L1.options.pos_y-TL_gap-res_gap-(TL_width+res_width)/2-grd_gap, 'orientation': '180'})
# RA = RouteMeander(design, 'RA', 
#     options = dict(total_length = RA_len, fillet=1.5*(res_width+res_gap*2), hfss_wire_bonds = True, 
#                    lead = dict(start_straight=l_couple, end_straight=0.100), 
#                    trace_width = res_width, trace_gap = res_gap,
#                    meander = dict(
#                        spacing = abs(otg_qA.options.pos_y-stg_rA.options.pos_y)/6, 
#                        asymmetry=-1*l_couple
#                    ),# 
#                    pin_inputs = Dict(start_pin = Dict(component = 'stg_rA', pin = 'short'),
#                                        end_pin = Dict(component = 'otg_qA', pin = 'open'))))
# RB_len = 4.45
# l_couple = 0.2
# otg_qB = OpenToGround(design, 'otg_qB',
#     {'pos_x':  1.6, 'pos_y': 1.0, 'orientation': '180', 'width': res_width, 'gap': res_gap, 'termination_gap': res_gap})
# stg_rB = ShortToGround(design, 'stg_rB',
#     {'pos_x':  1.6+l_couple, 'pos_y': port_L1.options.pos_y-TL_gap-res_gap-(TL_width+res_width)/2-grd_gap, 'orientation': '  0'})
# RB = RouteMeander(design, 'RB', 
#     options = dict(total_length = RB_len, fillet=1.5*(res_width+res_gap*2), hfss_wire_bonds = True, 
#                    lead = dict(start_straight=l_couple, end_straight=0.150), 
#                    trace_width = res_width, trace_gap = res_gap,
#                    meander = dict(
#                        spacing = abs(otg_qB.options.pos_y-stg_rB.options.pos_y)/6, 
#                        asymmetry=+1*l_couple
#                    ),# 
#                    pin_inputs = Dict(start_pin = Dict(component = 'stg_rB', pin = 'short'),
#                                        end_pin = Dict(component = 'otg_qB', pin = 'open'))))

JJ_test_pocket_L = Rectangle(design, 'JJ_test_pocket_L', 
    dict(pos_x =-2.0, pos_y =-2.0, width = 0.5, height = 1.0, subtract=True))
JJ_test_pocket_R = Rectangle(design, 'JJ_test_pocket_R', 
    dict(pos_x = 1.5, pos_y =-2.0, width = 0.5, height = 1.0, subtract=True))
# pad_t_1 = Rectangle(design, 'pad_t_1', 
#     dict(pos_x =-1.0, pos_y =-1.3, width = 0.15, height = 0.15, subtract=0))
# pad_b_1 = Rectangle(design, 'pad_b_1', 
#     dict(pos_x =-1.0, pos_y =-1.1, width = 0.15, height = 0.15, subtract=0))

gui.rebuild()
gui.autoscale()
gui.screenshot()
```

```python
design.components.keys()
```

# To GDS

```python
gds_render = design.renderers.gds
gds_render.options
```

```python
# gds_render.options.update(dict(path_filename='fluxonium_JJ_sample_wide_loop.gds', junction_pad_overlap='0um'))
```

```python
gds_render.options.fabricate = True
gds_render.options.negative_mask = dict(main=[2])
gds_render.options.no_cheese['view_in_file']['main']={1: False, 2: False}
gds_render.options.no_cheese['buffer']='20um'
gds_render.options.cheese['edge_nocheese']='1.5mm'
gds_render.options.cheese['view_in_file']['main']={1: True, 2:False}
gds_render.options.cheese.update(dict(cheese_0_x=0.005, cheese_0_y=0.005, delta_x=0.05, delta_y=0.05))
```

```python
design.qgeometry.tables['junction']
```

```python
design.renderers.gds.export_to_gds('Fluxonium_local_flux_250108_comb_layers_1.gds')
```

# HFSS

```python
eig_cropped = EPRanalysis(design, "hfss")
cropped_hfss = eig_cropped.sim.renderer
cropped_hfss.options['x_buffer_width_mm'] = 0.5
cropped_hfss.options['y_buffer_width_mm'] = 0.5
cropped_hfss.start()
cropped_hfss.activate_ansys_design("Full_chip_eig_R2_2", 'eigenmode')
cropped_hfss.clean_active_design()
# cropped_hfss.render_design(
#     ['Q1', 'Tee_1', 'stg_q1', 'stg_r1', 'R1',
#      'fl_loop_stg_1A', 'fl_loop_stg_1B', 'fl_loop_route_1', 'fl_q_stg_1', 
#      'cl_q1_gap_1', 'cl_q1_trace_1', 'cl_q_stg_1'], [])
cropped_hfss.render_design(
    ['Q2', 'Tee_2', 'stg_q2', 'stg_r2', 'R2',
     'fl_loop_stg_2A', 'fl_loop_stg_2B', 'fl_loop_route_2', 'fl_q_stg_2', 
     'cl_q1_gap_2', 'cl_q1_trace_2', 'cl_q_stg_2'], [])
# cropped_hfss.render_design(
#     ['Q3', 'Tee_3', 'stg_q3', 'stg_r3', 'R3',
#      'fl_loop_stg_3A', 'fl_loop_stg_3B', 'fl_loop_route_3', 'fl_q_stg_3', 
#      'cl_q1_gap_3', 'cl_q1_trace_3', 'cl_q_stg_3'], [])
```

```python
eig_cropped.close()
```
